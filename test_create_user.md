# 创建用户功能测试指南

## 功能概述
新增了管理员创建用户的功能，包括：
- 呼号设置
- 邮箱设置  
- 密码设置
- 权限等级设置

## 权限要求
只有SUP（监督员）和ADM（管理员）用户才能创建新用户。

## 测试步骤

### 1. 登录管理员账户
- 使用SUP或ADM级别的账户登录系统
- 确保当前用户有足够权限

### 2. 访问用户管理页面
- 导航到用户管理页面
- 应该能看到"添加用户"按钮

### 3. 创建新用户
- 点击"添加用户"按钮
- 填写表单：
  - 呼号：输入2-20个字符的呼号
  - 邮箱：输入有效的邮箱地址
  - 密码：输入至少6个字符的密码
  - 权限等级：选择适当的等级（S1-S3, C1-C3, I1-I3, SUP, ADM）
- 点击"创建"按钮

### 4. 验证创建结果
- 检查是否显示"用户创建成功"消息
- 刷新用户列表，确认新用户已添加
- 尝试使用新用户凭据登录

### 5. 测试权限控制
- 使用非SUP/ADM用户登录
- 确认"添加用户"按钮被禁用或不可见

## 错误处理测试

### 1. 重复呼号
- 尝试创建与现有用户相同呼号的新用户
- 应该显示"呼号已存在"错误

### 2. 无效邮箱
- 输入无效的邮箱格式
- 应该显示邮箱格式错误

### 3. 密码太短
- 输入少于6个字符的密码
- 应该显示密码长度错误

### 4. 权限不足
- 使用普通用户账户尝试访问创建功能
- 应该被拒绝访问

## API端点
- POST `/api/users/create` - 创建新用户
- 需要认证和管理员权限

## 数据库验证
创建用户后，检查数据库中的users表：
```sql
SELECT id, username, email, level, created_at FROM users ORDER BY created_at DESC LIMIT 5;
```

## 注意事项
- 密码会自动加密存储
- 创建的用户可以立即登录
- 用户ID会自动分配
- 创建时间会自动记录 